<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agent Framework Builder</title>
  <link rel="stylesheet" href="./agent.css" />
</head>
<body>
  <main class="wrap">
    <header class="card hero">
      <div class="lang-row"><button id="langToggleAgent" class="ghost mini">EN</button></div>
      <h1 data-i18n="title">Agent Framework Builder</h1>
      <p data-i18n="subtitle">Core + Modes + Composer：先定核心，再叠场景，最后导出 OpenClaw md 文件。</p>
      <p><a href="./home.html" data-i18n="back">← 返回 workshop</a></p>
    </header>

    <div class="flow-title sticky-title" data-i18n="flowAgentTitle">你正在做：场景层（更适合代理模式的模块区分）</div>
    <section class="flow-nav agent-flow">
      <div class="flow-row">
        <a class="flow-item" href="./index.html">Quick</a>
        <a class="flow-item" href="./intuition.html">Deep</a>
        <a class="flow-item current" href="./agent.html">Agent</a>
      </div>
    </section>

    <section class="card">
      <h2 data-i18n="coreTitle">Core（人格锚）</h2>
      <div class="row">
        <button id="loadPharosCase" class="ghost" data-i18n="loadPharosCase">加载示例：Corveil Aster</button>
      </div>
      <label><span data-i18n="purpose">存在目的</span><textarea id="purpose"></textarea></label>
      <label><span data-i18n="value">核心价值</span><textarea id="value"></textarea></label>
      <label><span data-i18n="brake">全局刹车</span><textarea id="brake"></textarea></label>
    </section>

    <section class="card">
      <div class="mode-head">
        <h2 data-i18n="modeTitle">Mode（场景模块）</h2>
        <button id="toggleDeleteMode" class="ghost mini danger-toggle" data-i18n="deleteMode">删除模块</button>
      </div>
      <div class="chips" id="modeRow"></div>
      <label><span data-i18n="entryCond">进入条件（何时触发该场景）</span><textarea id="entryCond"></textarea></label>
      <label><span data-i18n="sceneGoal">场景目标</span><textarea id="sceneGoal"></textarea></label>
      <label><span data-i18n="sceneTone">语气姿态</span><textarea id="sceneTone"></textarea></label>
      <label><span data-i18n="sceneRisk">风险处理</span><textarea id="sceneRisk"></textarea></label>
      <label><span data-i18n="sceneExit">退出条件</span><textarea id="sceneExit"></textarea></label>
      <div class="row wheel-wrap">
        <button id="fillModeExample" class="ghost" data-i18n="fillModeExample">填入当前模式示例</button>
        <div id="exampleWheel" class="example-wheel hidden" aria-hidden="true">
          <button class="wheel-opt" data-style="warm" data-i18n="styleWarm">温暖</button>
          <button class="wheel-opt" data-style="efficient" data-i18n="styleEfficient">效率</button>
          <button class="wheel-opt" data-style="intimate" data-i18n="styleIntimate">亲密</button>
          <button class="wheel-opt" data-style="playful" data-i18n="stylePlayful">恶作剧</button>
          <button class="wheel-opt wheel-opt-exp" data-style="provocative" data-i18n="styleProvocative">挑逗（实验）</button>
        </div>
      </div>
      <label><span data-i18n="extra">额外备注（可选）</span><textarea id="extra"></textarea></label>
      <div class="row">
        <button id="gen" data-i18n="generate">生成框架文件</button>
        <button id="clearAgent" class="ghost" data-i18n="clear">清空</button>
      </div>
    </section>

    <section id="out" class="card hidden">
      <h2 data-i18n="outputTitle">导出预览</h2>
      <div class="row">
        <button class="ghost" id="viewSoul">SOUL.md</button>
        <button class="ghost" id="viewAgents">AGENTS.md</button>
        <button class="ghost" id="viewUser">USER.md</button>
        <button class="ghost" id="viewTools">TOOLS.md</button>
        <button id="exportFile" data-i18n="exportFile">导出文件</button>
        <button class="ghost" id="savePersonaAgent" data-i18n="savePersona">保存到人格库</button>
        <button class="ghost" id="copyPreview" data-i18n="copyOne">一键复制</button>
      </div>
      <pre id="preview"></pre>
    </section>
  </main>
  <div id="toast" class="toast hidden">Done</div>
  <script src="./shared-utils.js"></script>
  <script src="./agent.js"></script>
</body>
</html>